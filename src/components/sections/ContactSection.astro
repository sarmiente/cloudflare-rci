---
import LocationIcon from "../../icons/location.svg";
import MailIcon from "../../icons/mail.svg";
import PhoneIcon from "../../icons/telefono.svg";
---


    <section id="contacto" class="w-full py-12 md:py-24 lg:py-32 bg-slate-100 overflow-hidden">
        <div class="container mx-auto px-4 md:px-6">
          <div class="grid gap-6 lg:grid-cols-2 lg:gap-12">
            <div class="flex flex-col justify-center space-y-4" data-aos="fade-right">
              <div class="space-y-2" >
                <div class="inline-block font-heading uppercase rounded-lg bg-main px-3 py-1 text-lg">
                    <p class="text-white">Contáctanos</p>
                </div>
                <h2 class="text-4xl  font-bold font-heading  sm:text-5xl md:text-7xl">
                    Déjanos tus datos
                </h2>
                <p class="max-w-[600px] font-body md:text-xl/relaxed lg:text-base/relaxed xl:text-xl/relaxed">
                    ¿Tienes preguntas o quieres mejorar tu seguridad?
                </p>
                <p class="max-w-[600px] font-body  md:text-lg/relaxed lg:text-base/relaxed xl:text-lg/relaxed">
                  Nuestro equipo está aquí para ayudarte a encontrar la solución perfecta.
              </p>

               
              </div>
              
              <div class="space-y-4  font-body">
                <div class="flex items-center gap-4">
                  <div class="bg-white p-5 rounded-xl">
                    <PhoneIcon width={20} height={20} />
                  </div>

                  <div>
                    <h3 class="font-bold">Teléfono</h3>
                    
                    <a  href="tel:+573136775143">
                      
                      <p class="hover:text-third">
                        +57 (313) 677-5143
                      </p>
                    </a>
                  </div>
                </div>


                <div class="flex items-center gap-4">
                  <div class="bg-white p-5 rounded-xl">
                    <MailIcon width={20} height={20} />
                  </div>
                  <div>
                    <h3 class="font-bold">Correo electrónico</h3>
                    <a href="mailto:proyectos@rcisas.com" >
                      <p class="hover:text-third">
                        proyectos@rcisas.com
                      </p>
                    </a>
                  </div>
                </div>


                <div class="flex items-center gap-4">
                  <div class="bg-white p-5 rounded-xl">
                   <LocationIcon width={20} height={20} />
                  </div>
                  <div>
                    <h3 class="font-bold">Direccion</h3><p
                      class=""
                    >
                      CALLE 13 #25 - 1, TURBACO, BOLÍVAR
                    </p>
                  </div>
                </div>


              </div>
            </div>
            
            <div class="flex items-center justify-center" data-aos="fade-left">
              <div
                class="rounded-lg border bg-white text-card-foreground w-full max-w-md border-none shadow-lg"
                id="quote"
                data-v0-t="card"
              >
                <div class="flex flex-col space-y-1.5 p-6">
                  <h3 class="text-4xl font-semibold leading-none font-heading tracking-tight">
                    Solicite un presupuesto gratuito
                  </h3><p class="text-sm font-body">
                    Complete el formulario a continuación y nos pondremos en contacto con usted en 24 horas.
                  </p>
                </div>
                <div class="p-6 pt-0">


                  <form id="form-brevo" class="grid gap-4 font-body">
                    <div class="grid grid-cols-2 gap-4">
                      <div class="space-y-2">
                        <label
                          for="nombre"
                          class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                          >Nombre</label
                        ><input
                          id="nombre"
                          name="NOMBRE"
                          required
                          class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                          placeholder="Tu nombre"
                        />
                      </div><div class="space-y-2">
                        <label
                          for="apellidos"
                          class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                          >Apellidos</label
                        ><input
                          id="apellidos"
                          name="APELLIDOS"
                          required
                          class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                          placeholder="Apellidos"
                        />
                      </div>
                    </div><div class="space-y-2">
                      <label
                        for="email"
                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                        >Correo electrónico</label
                      ><input
                        id="email"
                        name="EMAIL"
                        required
                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                        placeholder="tucorreo@ejemplo.com"
                        type="email"
                      />
                    </div><div class="space-y-2">
                      <label
                        for="whatsapp"
                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                        >Teléfono</label
                      ><input
                        id="whatsapp"
                        name="WHATSAPP"
                        required
                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                        placeholder="(300) 123-4567"
                        type="tel"
                      />
                    </div><div class="space-y-2">
                      <label
                        for="servicio"
                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                        >Servicio de interés</label>
                        <select
                        id="servicio"
                        name="SERVICIO"
                        required
                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                        ><option value="">Selecciona un servicio</option><option
                          value="video">Videovigilancia</option
                        ><option value="alarm">Sistemas de alarma</option><option
                          value="access">Control de Acceso</option
                        ><option value="other">Otro</option></select>
                    </div><div class="space-y-2">
                      <label
                        for="mensaje"
                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                        >Mensaje</label
                      ><textarea
                        id="mensaje"
                        name="MENSAJE"
                        class="flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
                        placeholder="Cuentanos acerca de tus necesidades en seguridad..."></textarea>
                    </div>
                    <button
                      class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-main text-white hover:bg-second h-11 rounded-md px-8"
                      type="submit">Enviar solicitud</button>
                  </form>
                </div>
              </div>
            </div>

            
          </div>
        </div>
      </section>

      <dialog id="responseDialogSection" class="mx-auto rounded-xl p-6 shadow-lg my-auto">
      <p id="responseMessageSection" class="font-body"></p>
        <form method="dialog">
          <button class="mt-4 px-4 py-2 rounded-lg bg-blue-600 text-white">Cerrar</button>
        </form>
</dialog>
      
<script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("form-brevo").addEventListener("submit", async function(e) {
        
        e.preventDefault();

      const nombre = e.target.NOMBRE.value;
      const apellidos = e.target.APELLIDOS?.value || "";
      const email = e.target.EMAIL.value;
      const whatsapp = e.target.WHATSAPP.value;
      const servicio = e.target.SERVICIO?.value || "";
      const mensaje = e.target.MENSAJE.value;


          try {
              const response = await fetch("/api/contact", {
                method: "POST",
                headers: {
                  "Accept": "application/json",
                  "Content-Type": "application/json",
                  
                },
                body: JSON.stringify({ nombre, apellidos, email, whatsapp, servicio, mensaje,
                  listId: 7
           })
              });

              const dialog = document.getElementById("responseDialogSection");
              const messageEl = document.getElementById("responseMessageSection");

              if (response.ok){
                messageEl.innerText = "✅ ¡Gracias por tu mensaje! Nos comunicaremos a la mayor brevedad posible.";
                dialog.showModal();
                e.target.reset();
              } else {
                const error = await response.json();
                console.error(error);
                messageEl.innerText = "⚠️ Hubo un error: " + (error.message || "Intenta de nuevo");
                dialog.showModal();
              }
          } catch (error) {
            console.error(error);

            const dialog = document.getElementById("responseDialogSection");
            const messageEl = document.getElementById("responseMessageSection");

            messageEl.innerText = "❌ Error en la conexión con el servidor.";
            dialog.showModal();            
          }
        })
    })
</script>